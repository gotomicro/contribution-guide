# 设计原则和规范

## 禁止在 main 函数以外的地方使用 panic

对于中间件开发来说，永远返回 error，让用户决定是否 panic。即便是中间件是处于初始化过程，也应该返回 error。

对于一般的业务开发来说，永远只需要在 main 函数里面考虑使用 panic。

## 所有的公开方法，都应该加上 error 作为返回参数

只有以下情况不需要：
- main 函数。main 函数收到返回的 error 以后，应该直接 panic；
- 链式调用。链式调用是一种常见的模式，比如说 Builder 设计模式，但是即便是链式调用，在最后终结方法的地方，依旧需要返回一个 error 作为参数；

## 所有公开方法都尽量加上 context.Context 作为参数

如果你的代码本身，会和第三方打交道，那么一定要加上 context.Context 作为参数。